<!DOCTYPE html>
<html>
<head>
    <title>Reindeer - Dashboard</title>
    <script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js'></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>
    <script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200italic,300,300italic,400,400italic' rel='stylesheet' type='text/css'>
    <link href="/stylesheets/dashboard.css" rel="stylesheet" type="text/css">

    <script type='text/javascript' src='/javascripts/dashboard.js'></script>
</head>
<body>

<ul class="navbar">
    <li class="navbar-item"><a class="active" href="/">Reindeer</a></li>
    <li class="navbar-item"><a class="active" href="/dashboard">Dashboard</a></li>
    <li id="logout" class="navbar-item"><a class="active" >Log out</a></li>
</ul>

<div class="user-profile-container" >
    <div class="user-profile-inner-container">
        <img class="profile-pic" src="/images/UIElements/reindeer-profile-pic.gif">
        <h1><%= user.name %></h1>
        <h1 id="id"><%= user.id %></h1>
    </div>
    <img class="my-tutorials-tab" src="/images/UIElements/my-tutorials-tab.png">
</div>

<div id="tutorial-list-container" class="tutorial-list-container">
    <tutorial-view v-for="tutorialObject in state.tutorialObjects"
                   :tutorial-object="tutorialObject"></tutorial-view>
    <!--<div v-for="tutorialObject in state.tutorialObjects" class="tutorial-session" id="{{ tutorialObject.courseCode }}">-->
        <!--<div class="tutorial-icon">-->
            <!--<h1 class="icon-code">{{ tutorialObject.iconCode }}</h1>-->
        <!--</div>-->

        <!--<div class="tutorial-info">-->
            <!--<h1><b>{{ tutorialObject.courseCode }}</b></h1>-->
            <!--<h2>{{ tutorialObject.courseName }}</h2>-->
            <!--<h2>Group: {{ tutorialObject.groupName }}</h2>-->
        <!--</div>-->

        <!--<div class="tutorial-buttons">-->
            <!--<template v-if="tutorialObject.isTutor">-->
                <!--<template v-if="tutorialObject.isRoomSessionStarted">-->
                    <!--<div class="button" id="end-button">-->
                        <!--<h3>End</h3>-->
                    <!--</div>-->
                    <!--<div v-on:click="joinTutorial" class="button" id="join-button">-->
                        <!--<h3>Join</h3>-->
                    <!--</div>-->
                <!--</template>-->
                <!--<template v-else>-->
                    <!--<div v-on:click="createTutorialSession" class="button" id="create-button">-->
                        <!--<h3>Create</h3>-->
                    <!--</div>-->
                    <!--<div class="button" id="join-unable-button">-->
                        <!--<h3>Not Open</h3>-->
                    <!--</div>-->
                <!--</template>-->
            <!--</template>-->
            <!--<template v-else>-->
                <!--<template v-if="tutorialObject.isRoomSessionStarted">-->
                    <!--<div v-on:click="joinTutorial" class="button" id="join-button">-->
                        <!--<h3>Join</h3>-->
                    <!--</div>-->
                <!--</template>-->
                <!--<template v-else>-->
                    <!--<div class="button" id="join-unable-button">-->
                        <!--<h3>Not Open</h3>-->
                    <!--</div>-->
                <!--</template>-->
            <!--</template>-->
            <!--<div class="button" id="files-button">-->
                <!--<h3>Files</h3>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
</div>

<script>

    $("#logout").on("click", function(event){
        Cookies.remove('token');
        location.assign("/");
    });


    var refreshTutorialURL = "<%= urls.refreshTutorials %>";
    var createSessionURL = "<%= urls.createSessions %>";

    window.dashboard.init(refreshTutorialURL, createSessionURL);

//
//    function showCourseInfo(courseInfo) {
//        addModulesToView(courseInfo);
//        addTutorialSessionToModuleView(courseInfo);
//        showDiv();
//        addEndOfListIcon();
//    }
//

//
//    function displayNone() {
//        $('#modules').html('No Tutorial');
//    }
//
//    function addEndOfListIcon() {
//        $('.tutorial-list-container').append(`
//            <img class="end-of-list" src="/images/UIElements/end-of-tutorial-list.png">
//        `);
//    }
//
//
//    function addCreateButton(moduleElement, tutorialID) {
//        $(moduleElement).find(".tutorial-buttons").append(`
//            <div class="button" id="create-button">
//                <h3>Create</h3>
//            </div>
//        `);
//
//        $(moduleElement).find(".tutorial-buttons").find("#create-button").click( function() {
//            var self = this;
//            createSession(tutorialID, function(data) {
//
//                addJoinButton(moduleElement, data.roomID, true);
//                addEndButton(moduleElement, data.roomID, true);
//                self.remove();
//                $(moduleElement).find(".tutorial-buttons").find("#join-unable-button").remove();
//            });
//        });
//    }
//
//    function addEndButton(moduleElement, tutorialID, isPrepend) {
//        if (isPrepend) {
//            $(moduleElement).find(".tutorial-buttons").prepend(`
//            <div class="button" id="end-button">
//                <h3>End</h3>
//            </div>
//            `);
//        } else {
//            $(moduleElement).find(".tutorial-buttons").append(`
//            <div class="button" id="end-button">
//                <h3>End</h3>
//            </div>
//            `);
//        }
//
//        $(moduleElement).find(".tutorial-buttons").find("#end-button").click( function() {
//        });
//    }
//
//    function addJoinButton(moduleElement, tutorialID, isPrepend) {
//        if (isPrepend) {
//            $(moduleElement).find(".tutorial-buttons").prepend(`
//            <div class="button" id="join-button">
//                <h3>Join</h3>
//            </div>
//            `);
//        } else {
//            $(moduleElement).find(".tutorial-buttons").append(`
//            <div class="button" id="join-button">
//                <h3>Join</h3>
//            </div>
//            `);
//        }
//
//        $(moduleElement).find(".tutorial-buttons").find("#join-button").click( function() {
//            window.open("/tutorial/" + tutorialID);
//        });
//    }
//
//    function addJoinUnableButton(moduleElement, tutorialID) {
//        $(moduleElement).find(".tutorial-buttons").append(`
//            <div class="button" id="join-unable-button">
//                <h3>Not open</h3>
//            </div>
//        `);
//    }
//
//    function addFilesButton(moduleElement, moduleCode,groupName,tutorialID) {
//        $(moduleElement).find(".tutorial-buttons").append(`
//            <div class="button" id="files-button">
//                <h3>Files</h3>
//            </div>
//        `);
//
//        $(moduleElement).find(".tutorial-buttons").find("#files-button").click( function() {
//            window.open("/workbin/" + moduleCode + "/" + groupName + "/" + tutorialID);
//        });
//    }
//
//
//
//
//
//
//
//    /**
//     * ========== Session Handling Functions ============
//     * ==================================================
//     * */
//    function createSession(tutorialID, callback) {
//        $.ajax({
//            type: "POST",
//            url: createSessionURL,
//            data: {
//                token: Cookies.get('token'),
//                roomID:tutorialID
//            },
//            success: callback,
//            error: logError("Fail to create room"),
//            dataType: "JSON"
//        });
//    }
//
//    /**
//     * ================ Helper Functions ================
//     * ==================================================
//     * */
//
//    function isTutor(generalInfo) {
//        return generalInfo.role === "tutor";
//    }
//
//    function getGeneralInfo(tutorialInfo) {
//        var generalInfo = {};
//        generalInfo.groupName = tutorialInfo.name;
//        generalInfo.week = tutorialInfo.week;
//        generalInfo.day = tutorialInfo.day;
//        generalInfo.time = tutorialInfo.time;
//        generalInfo.role = tutorialInfo.users[0].userTutorial.role;
//        generalInfo.roomSessionStarted = tutorialInfo.roomSessionStarted;
//        generalInfo.courseCode = tutorialInfo.coursecode;
//
//        return generalInfo;
//    }
//
//    function getTutorialID(tutorialInfo) {
//        return tutorialInfo.id;
//    }
//
//    function escapeName(idName) {
//        return escape(idName).replace(/\//g, "-");
//    }
//
//    function logError(msgHeader) {
//        return function(result) {
//            console.log(msgHeader, result);
//        }
//    }
//
//    // Polling occurs here!
//    function getTutorialUpdates() {
//        $.ajax({
//            type: "POST",
//            url: refreshTutorialURL,
//            data: {token: Cookies.get('token')},
//            success: function(results) {
//                console.log(results);
//                setTimeout(getTutorialUpdates, 5000);
//            },
//            error: logError("Fail to pull available tutorials"),
//            dataType: "JSON"
//        });
//    }
//
//    $(document).ready(function() {
//        $.ajax({
//            type: "POST",
//            url: refreshTutorialURL,
//            data: {token: Cookies.get('token')},
//            success: getAllAvailableTutorials,
//            error: logError("Fail to pull available tutorials"),
//            dataType: "JSON"
//        });
//
////        setTimeout(getTutorialUpdates, 5000);
//    });
</script>

</body>
</html>

<style>

</style>