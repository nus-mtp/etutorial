<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js'></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>
    <script type="text/javascript" src="/javascripts/intercom.js/intercom.js"></script>
    <!--<link rel='stylesheet' href='/stylesheets/style.css' />-->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200italic,300italic,400,400italic' rel='stylesheet' type='text/css'>
</head>
<body>

    <ul>
        <li><a class="active" href="#home">Reindeer</a></li>
        <li style="float:right"><a class="active" href="https://github.com/nus-mtp/etutorial">GitHub Repo</a></li>
        <li style="float:right"><a class="active" href="#about">About</a></li>
        <% if(user){ %>
            <li style="float:right"><a class="active" id="logout" >Logout</a></li>
        <% } %>
    </ul>

    <div class="logo-containter">
        <img class="logo" src="/images/loginReindeer.png">
    </div>

    <div class="login-section-containter">
        <div class="title-containter">
            <h1>
                <i>Reindeer</i>
            </h1>
            <h2>
                <i>- A Leap Towards Better Tutorial Experiences -</i>
            </h2>
            <% if(user){ %>
                <h2 class="welcomeMessage">
                    Welcome back, <%= user.name %>!
                </h2>
                <a href="/dashboard"> <img class="proceed-button" src="/images/proceedButton.png"> </a>
            <% } else{ %>
                <img class="login-button" src="/images/loginButton.png">
            <% } %>

        </div>
    </div>



</body>
</html>

<script>

    $("#logout").on("click", function(event){
        Cookies.remove('token');
        location.reload();
    });

    $(".login-button").on("click", function(event){
        window.open("/login", "IVLE Login", "directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no, top=500, left=500, width=280, height=200");

        var intercom = Intercom.getInstance();

        intercom.on('login_result', function(data) {

            window.location.href = '/dashboard';
        });
    });

</script>

<style>

    body {
        margin:0;
        background-color: #ffb526;
    }

    ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #213045;
    }

    li {
        float: left;
    }

    li a {
        display: block;
        color: white;
        text-align: center;
        padding: 20px 16px;
        text-decoration: none;
        font-family: 'Source Sans Pro', sans-serif; font-weight: 400;
        font-size: 28px;
    }

    li a:hover {
        background-color: #44767f;
    }

    #logout {
        cursor: pointer;
    }

    .logo-containter,.login-section-containter {
        float: left;
        width: 50%;
        height: 100%;
        margin: auto;
    }

    .logo {
        position: relative;
        width: 75%;
        top: 50%;
        margin-top: 6vh;
        margin-bottom: auto;
        -webkit-animation-name: moveReindeer;
        -webkit-animation-duration: 2s;
    }

    @-webkit-keyframes moveReindeer {
        from {
            left:-12%;}
        to {left:0;}
    }

    .login-button {
        position: relative;
        width: 50%;
        top: 50%;
        margin-top: 10vh;
        margin-left: 10vh;
        cursor: pointer;
    }

    .proceed-button {
        position: relative;
        width: 50%;
        top: 50%;
        margin-top: 2vh;
        margin-left: 10vh;
    }

    h1 {
        font-family: 'Source Sans Pro', sans-serif; font-weight: 200;
        font-size: 20vh;
        color: white;
        text-shadow: 6px 6px #dd9a20;
        margin: 12vh 0 0 0;
        padding: 0;
    }

    h2 {
        font-family: 'Source Sans Pro', sans-serif; font-weight: 400;
        font-size: 3.8vh;
        color: white;
        margin:0;
        padding:0;
    }

    .welcomeMessage {
        margin-top: 10vh;
        margin-left: 12vh;
    }

</style>
