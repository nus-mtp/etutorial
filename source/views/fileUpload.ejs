<html>
<head>
</head>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>

<script>
    $(document).ready(function () {

        var form = document.getElementById('fileForm');
        var fileSelect = document.getElementById('fileSelect');
        var uploadButton = document.getElementById('uploadButton');

        form.onsubmit = function (event) {
            event.preventDefault();

            // Get the selected files from the input.
            var files = fileSelect.files;

            // Create a new FormData object.
            var formData = new FormData();

            // Loop through each of the selected files.
            for (var i = 0; i < files.length; i++) {
                var file = files[i];

                // Check the file type.
                if ((!file.type.match('image.*'))
                        && (!file.type.match('\.pdf'))) {
                    alert("Sorry. The system only supports image files and PDF files.");
                    continue;
                }

                // Add the file to the request.
                formData.append('userUpload', file, file.name);
                console.log(file.name);
            }
            // Set up the request.
            var xhr = new XMLHttpRequest();

            // Open the connection.
            xhr.open('POST', 'http://localhost:3000/fileupload?token=' + Cookies.get('token'), true);
            xhr.send(formData);
        }
    });

</script>

<!-- Upload Module UI -->
<div id="uploadWrapper">
    <h1 id="title">
        File Upload Module
    </h1>
    <h1>
        <form id="fileForm" action="http://localhost:3000/fileupload" method="POST" enctype="multipart/form-data">
            <input type="file" id="fileSelect"/>
            <button type="submit" id="uploadButton">Upload</button>
        </form>
    </h1>
</div>

</html>